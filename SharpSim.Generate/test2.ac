arch arm;

exception GENERAL_FAULT;

behaviour <arm.dpi1> test
{
	u8 a;
	u8 b;
	u8 c;
	float q;

	if (inst.rd == 15) {
		raise GENERAL_FAULT;
		a = 2;
		b = 3;
	}

	q = 5.5;

	a = 1; 
	b = read_register_bank(RB, 1);

	if (a > b) {
		if (inst.s) {
			c = 0;
		} else {
			c = 1;
		}
	} else {
		c = 2;
	}

	if (c == 2) {
		write_register_bank(RB, 0, 5);
	}
};

helper void testx(u8 a, u32 b)
{
	u8 c;
	u8 a;

	if (a > b) {
		c = 1;
	} else {
		c = 0;
	}
};

helper void test3()
{
	u8 a;
	return 5;
	a = 1;
};

helper u32 add_with_flags_0(u32 op1, u32 op2, bool set_flags)
{
	u32 a;

    if (set_flags) {
            return __builtin_adc_flags(op1, op2, 0);
    }

    return op1 + op2;
};